# Backend API Reference

The **Passwordless.dev private API** is used by your backend to initiate key registrations, verify sign-ins, retrieve keys for end-users, and more.

All requests made to this API **require** your API [private secret](concepts.md#api-keys) in the header for authentication. Requests made to the public API, which are facilitated by methods in the [JavaScript client](frontend/javascript.md), will instead require your API [public key](concepts.md#api-keys).

## `/register/token`

### Request

`POST` requests made to the `/register/token` endpoint create a [registration token](concepts.md#tokens) for a user, which will be used by your frontend to negotiate creation of a WebAuth credential.

The request body **must include** at least a `userId` and `username` for example:

::: code-tabs

@tab http

```http request
POST https://v4.passwordless.dev/register/token HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "userId": "107fb578-9559-4540-a0e2-f82ad78852f7",
  "username": "pjfry@passwordless.dev",
  "displayname": "Philip J Fry",
}
```

@tab js

```js
const apiUrl = 'https://v4.passwordless.dev';

const payload = {
  userId: '107fb578-9559-4540-a0e2-f82ad78852f7', // A WebAuthn User Handle, which should be generated by your application. Max. 64 bytes.
  username: 'pjfry@passwordless.dev', // For display purposes, should help a user identify the user account.
  displayname: 'Philip J. Fry', // A human-palatable name for the account.
  authenticatorType: 'any', // WebAuthn authenticator attachment modality. Can be "any" (default), "platform" which triggers client device-specific options Windows Hello, FaceID, or TouchID, or "cross-platform", which triggers roaming options like security keys.
  userVerification: 'preferred', // Whether the relying party requires locally-invoked authorization for the operation. Can be "preferred" (default), "required", or "optional".
  aliases: ['pjfry@passwordless.dev'], // An array of user-created identifiers, like emails, which are used to reference a userId.
  aliasHashing: true // Whether aliases should be hashed before being stored. Defaults to true.
};

// POST the payload to the Passwordless.dev API using your API private secret.
const { token } = await fetch(apiUrl + '/register', {
  method: 'POST',
  body: JSON.stringify(payload),
  headers: {
    'ApiSecret': 'myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4',
    'Content-Type': 'application/json'
  }
}).then((r) => r.json());
```

:::

The request body may include additional parameters besides those required, all of which are listed here:

| Parameter           | Description                                                                                                                                                                                                                                          | Example Value                            |
| :------------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------- |
| `userId`            | Required. A WebAuthn User Handle, which should be generated by your application. This is used to identify your user (could be a database primary key ID or a guid). Max. 64 bytes. Should not contain PII about the user.                            | `"107fb578-9559-4540-a0e2-f82ad78852f7"` |
| `username`          | Required. A human-palatable identifier for a user account. It is intended only for display, i.e., aiding the user in determining the difference between user accounts with similar displayNames. Used in Browser UI's and never stored on the server | `"pjfry@passwordless.dev"`               |
| `displayname`       | A human-palatable name for the account, which should be chosen by the user. Used in Browser UI's and never stored on the server.                                                                                                                     | `"Philip J Fry"`                         |
| `attestation`       | WebAuthn attestation conveyance preference. Only `"none"` (default) is supported on 'Trial' & 'Pro' plans. While 'Enterprise' can also use `"direct"` or `"indirect"`. ([learn more](concepts.md#attestation))                                       | `"none"` (default)                       |
| `authenticatorType` | WebAuthn authenticator attachment modality. Can be `"any"` (default), `"platform"`, which triggers client device-specific options Windows Hello, FaceID, or TouchID, or `"cross-platform"`, which triggers roaming options like security keys.       | `"any"` (default)                        |
| `discoverable`      | If `true`, creates a client-side Discoverable Credential that allows sign in without needing a username.                                                                                                                                             | `true` (default)                         |
| `userVerification`  | Allows choosing preference for requiring User Verification (biometrics, pin code etc) when authenticating Can be `"preferred"` (default), `"required"` or `"discouraged"`.                                                                           | `"preferred"`                            |
| `expiresAt`         | Timestamp (UTC) when the registration token should expire. By default, current time + 120 seconds.                                                                                                                                                   | `"3023-08-01T14:43:03Z"`                 |
| `aliases`           | A array of aliases for the userId, such as an email or username. Used to initiate a sign-in on the client side with the `signinWithAlias()` method. An alias must be unique to the userId. Defaults to an empty array `[]`.                          | `["pjfry@passwordless.dev"]`             |
| `aliasHashing`      | Whether aliases should be hashed before being stored. Defaults to `true`.                                                                                                                                                                            | `true`                                   |

### Response

If successful, the `/register/token` endpoint will create a registration token returned as json, for example:

```json
{ "token": "register_wWdDh02ItIvnCKT_02ItIvn..." }
```

This registration token will will be used by your frontend to negotiate creation of a WebAuth credential.

## `/signin/verify`

### Request

`POST` requests made to the `/signin/verify` endpoint unpack an [authentication token](concepts.md#tokens), which must be generated by calling a `.signinWith*()` method on your frontend ([learn more](frontend/javascript.md#signinwith)) and included here in the request body, for example:

::: code-tabs

@tab http

```http request
POST https://v4.passwordless.dev/signin/verify HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "token": "d5vzCkL_GvpS4VYtoT3..."
}
```

@tab js

```js
const apiUrl = 'https://v4.passwordless.dev';

// Fetch the authentication token from your frontend.
const payload = { token: req.query.token };

// POST the authentication token to the Passwordless.dev API using your API private secret.
const response = await fetch(apiUrl + '/signin/verify', {
  method: 'POST',
  body: JSON.stringify(payload),
  headers: {
    'ApiSecret': 'myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4',
    'Content-Type': 'application/json'
  }
});
```

:::

The Passwordless.dev private API will unpack the authentication token to check its legitimacy.

### Response

If successful, the `/signin/verify` endpoint will return a success response object, for example:

```json
{
  "success": true,
  "userId": "123",
  "timestamp": "3023-08-01T14:43:03Z",
  "rpid": "localhost",
  "origin": "http://localhost:3000",
  "device": "Firefox, Windows 10",
  "country": "SE",
  "nickname": "My Work Phone",
  "expiresAt": "3023-08-01T14:43:03Z",
  "tokenId": "TODO",
  "type": "passkey_signin" // or passkey_register
}
```

Use the `.success` value (`true` or `false`) to determine next actions, i.e. whether to complete the sign-in ([learn more](frontend/javascript.md#signinwith)).

## `/signin/generate-token`

### Request

`POST` requests made to the `/signin/generate-token` endpoint create a [manually generated authentication token](concepts.md#tokens) for a user, side-stepping the regular sign-in flow (i.e. the `.signinWith*()` methods). The resulting token can then be verified through the `/signin/verify` endpoint and used just like a regular authentication token.

::: code-tabs

@tab http

```http request
POST https://v4.passwordless.dev/signin/generate-token HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "userId": "123",
  "timeToLive": 30
}
```

@tab js

```js
const apiUrl = 'https://v4.passwordless.dev';

// Generate an authentication token, side-stepping the usual signin process.
const payload = {
  userId: '107fb578-9559-4540-a0e2-f82ad78852f7', // ID of the user to generate the token for.
  timeToLive: 30 // Time in seconds the token is valid for. Default is 120 seconds.
};

// POST the user ID to the Passwordless.dev API using your API private secret.
const response = await fetch(apiUrl + '/signin/generate-token', {
  method: 'POST',
  body: JSON.stringify(payload),
  headers: {
    'ApiSecret': 'myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4',
    'Content-Type': 'application/json'
  }
});
```

:::

::: tip
By default, manually generated authentication tokens are valid for 120 seconds. You can adjust this by setting the `timeToLive` parameter in the request body.
:::

### Response

If successful, the `/signin/generate-token` endpoint will return a response object, for example:

```json
{
  "token": "d5vzCkL_GvpS4VYtoT3..."
}
```

## `/alias`

### Request

`POST` requests made to the `/alias` endpoint add aliases ([learn more](concepts.md#user-identifiers)) to a user, dictated by their `userId`, in order to allow sign-in with additional usernames, email addresses, etc.

The request body **must include** the user's `userId` and a **complete** array of aliases, as pre-existing aliases are overwritten when the `POST` request is made, for example:

::: code-tabs

@tab http

```http request
POST https://v4.passwordless.dev/alias HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "userId": "107fb578-9559-4540-a0e2-f82ad78852f7",
  "aliases": [
    "pjfry@passwordless.dev",
    "benderrules@passwordless.dev"
  ],
  "hashing": true
}
```

@tab js

```js
const apiUrl = 'https://v4.passwordless.dev';

// Fetch an array of existing and new aliases for the user.
const payload = {
  userId: '107fb578-9559-4540-a0e2-f82ad78852f7',
  aliases: ['pjfry@passwordless.dev', 'benderrules@passwordless.dev'],
  hashing: true // Whether to hash aliases before stored, defaults to true.
};

// POST the array to the Passwordless.dev API using your API private secret.
await fetch(apiUrl + '/alias', {
  method: 'POST',
  body: JSON.stringify(payload),
  headers: {
    'ApiSecret': 'myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4',
    'Content-Type': 'application/json'
  }
});
```

:::

::: tip
By default, `"hashing": true` will be turned on to hash aliases before they're stored. Hashed aliases will not be viewable to you in the admin console.
:::

A few rules to take into consideration when allowing users to create aliases:

- An alias must be unique to the specified `userId`.
- An alias must be no more than 250 characters.
- A `userID` may have no more than 10 aliases associated with it.

### Response

Alias are never returned in any API responses, and can be hashed to preserve user privacy (see above). If successful, the `/alias` endpoint will return an HTTP 204 (No Content) [status code](#status-codes).

## `/credentials/list`

### Request

`GET` requests made to the `/credentials/list` endpoint list all [registered credentials](concepts.md#credential) associated with a user, as dictated by their `userId`. The request **must include** the `userId` in question, for example:

::: code-tabs

@tab http

```http request
GET https://v4.passwordless.dev/credentials/list?userId=107fb578-9559-4540-a0e2-f82ad78852f7 HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
```

@tab js

```js
const apiUrl = 'https://v4.passwordless.dev';

// Fetch the userId for the user in question.
const payload = {
  userId: '107fb578-9559-4540-a0e2-f82ad78852f7'
};

// POST the userId to the Passwordless.dev API using your API private secret.
const credentials = await fetch(apiUrl + '/credentials/list', {
  method: 'POST',
  body: JSON.stringify(payload),
  headers: {
    'ApiSecret': 'myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4',
    'Content-Type': 'application/json'
  }
}).then((r) => r.json());
```

:::

### Response

If successful, the `/credentials/list` endpoint will return an array of `.json` objects where each object represents a [registered credential](concepts.md#credential):

```json
[
  {
    "descriptor": {
      "type": "public-key",
      "id": "2mgrJ6LPItfxbnVc2UgFPHowNGKaYBm3Pf4so1bsXSk"
    },
    "publicKey": "pQECAyYgASFYIPi4M0A+ZFeyOHEC9iMe6dVhFnmOZdgac3MRmfqVpZ0AIlggWZ+l6+5rOGckXAsJ8i+mvPm4YuRQYDTHiJhIauagX4Q=",
    "userHandle": "YzhhMzJlNWItNDZkMy00ODA4LWFlMTAtMTZkM2UyNmZmNmY5",
    "signatureCounter": 0,
    "createdAt": "2023-04-21T13:33:50.0764103",
    "aaGuid": "adce0002-35bc-c60a-648b-0b25f1f05503",
    "lastUsedAt": "2023-04-21T13:33:50.0764103",
    "rpid": "myapp.example.com",
    "origin": "https://myapp.example.com",
    "country": "US",
    "device": "Chrome, Mac OS X 10",
    "nickname": "Fred's Macbook Pro 2",
    "userId": "c8a32e5b-46d3-4808-ae10-16d3e26ff6f9"
  } //, ...
]
```

[Learn more about what these key-value pairs signify](concepts.md#credential).

## `/credentials/delete`

### Request

`POST` requests made to the `/credentials/delete` endpoint delete a specific credential associated with a user, as dictated by a `credentialId`. The request **must include** the `credentialId` in question, for example:

```http request
POST https://v4.passwordless.dev/credentials/delete HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "credentialId": "qgB2ZetBhi0rIcaQK8_HrLQzXXfwKia46_PNjUC2L_w"
}
```

### Response

If successful, the `/credentials/delete` endpoint will return an HTTP 204 (No Content) [status code](#status-codes).

<!--
## Errors
Passwordless.dev errors are formatted to the `problem details` [RFC-7807](https://www.rfc-editor.org/rfc/rfc7807).
HTTP API errors will have the following response body:
```json5
{
  "type": "https://docs.passwordless.dev/errors#missing_register_token",
  "title": "The token you sent was not correct. The token used for this endpoint should start with 'register_'. Make sure you are not sending the wrong value.",
  "status": 400,
  "errorCode": "missing_register_token"
}
```
-->

## `/magic-links/send`

### Request

`POST` requests made to the `/magic-links/send` endpoint emails the address provided with a Magic Link. This magic link contains a URL, provided by you, that will redirect the recipient to an endpoint in your application. From here, you can send the token Passwordless.dev has embedded in the link to verify the token at `signin/verify`.

::: warning Important
Passwordless.dev does not store user emails. When integrating Magic Links, you should validate that the email and user id are for the same user. Otherwise, you may introduce a security vulnerability within your application.
:::

The request must include all three fields.

- `emailAddress`: Recipient of the magic link. Must be a valid email address.
- `urlTemplate`: This is the URL that users will be directed to when they click the link. It should be a valid URL except for the token template string, `$TOKEN`. We will swap `$TOKEN` with the actual token value before sending the email. In your application, you should parse the token out of the url (most easily done with a query parameter as seen below) and send it to the `signin/verify` endpoint to validate the request.
- `userId`: The identifier of the user the email is intended for.
- `timeToLive`: (OPTIONAL) Number of seconds the magic link token should be valid for. If not set, the default value is 1 hour. Note: Magic links remain valid and can be used multiple times until the TTL expires - they do not expire when clicked.

```http request
POST https://v4.passwordless.dev/magic-links/send HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "emailAddress": "user-email@example.com",
  "urlTemplate": "https://www.myapp.com?token=$TOKEN",
  "userId": "c8a32e5b-46d3-4808-ae10-16d3e26ff6f9",
  "timeToLive": 3600
}
```

### Response

If successful, the `/magic-links/send` endpoint will return an HTTP 204 (No Content) [status code](#status-codes).

If Magic Links has not been enabled, the `/magic-links/send` endpoint will return an HTTP 403 (Unauthorized) [status code](#status-codes) along with a message about enabling the Magic Links feature.

## `/auth-configs/list`

### Request

`GET` requests made to the `/auth-configs/list` endpoint will return a `.json` object containing a list of authentication configurations that can be used by the application. It can be filtered to one specific configuration by passing the purpose name as a query parameter.

```http request
GET https://v4.passwordless.dev/auth-configs/list HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
```

```http request
GET https://v4.passwordless.dev/auth-configs/list?purpose=step-up HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
```

For more information about Authentication Configurations, please see the [concepts page](concepts.md#authentication-configurations).

### Response

If successful, the `/auth-configs/list` endpoint will return a `.json` object containing a list of authentication configurations:

```json
{
  "configurations": [
    {
      "purpose": "sign-in",
      "timeToLive": 120,
      "userVerificationRequirement": "preferred",
      "createdBy": "System",
      "createdOn": null,
      "editedBy": null,
      "editedOn": null,
      "lastUsedOn": null
    },
    {
      "purpose": "step-up",
      "timeToLive": 180,
      "userVerificationRequirement": "required",
      "createdBy": "System",
      "createdOn": null,
      "editedBy": null,
      "editedOn": null,
      "lastUsedOn": null
    }
  ]
}
```

## `/auth-configs/add`

### Request

`POST` requests to `/auth-configs/add` will create an authentication configuration for the authentication process. There are some restrictions on the request object.

- `purpose`: A-z, 0-9, -, and \_ are the allowed characters. Max length of purpose is 255 characters.
- `timeToLive`: Positive time span value (hh:mm:ss)
- `userVerificationRequirement`: `preferred`, `required`, `discouraged`
- `performedBy`: user identifier to track changes to the configuration

```http request
GET https://v4.passwordless.dev/auth-configs/add HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "purpose": "access-secrets-purpose", // identifying string give context to the specific authentication
  "timeToLive": "00:03:00", // timespan the token is valid for
  "userVerificationRequirement": "preferred", // requirement for if the user has to verify they're allowed to use an authenticator
  "performedBy": "user_123" // user identifier to track changes to the configuration
}
```

### Response

If successful, the `/auth-configs/add` endpoint will return an HTTP 201 (Created) [status code](#status-codes).
If unsuccessful, the `/auth-configs/add` endpoint will return an HTTP 400 (Bad Request) [status code](#status-codes) with a [problem details](errors/#problem-details) body.

## `/auth-configs/`

### Request

`POST` requests to `/auth-configs` will edit an authentication configuration for the authentication process. There are some restrictions on the request object.

- `purpose`: Must be an existing purpose (If a new purpose is passed here, a 404 will be returned)
- `timeToLive`: Positive time span value (hh:mm:ss)
- `userVerificationRequirement`: `preferred`, `required`, `discouraged`
- `performedBy`: user identifier to track changes to the configuration

```http request
GET https://v4.passwordless.dev/auth-configs HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "purpose": "access-secrets-purpose", // existing purpose
  "timeToLive": "00:03:00", // timespan the token is valid for
  "userVerificationRequirement": "preferred", // requirement for if the user has to verify they're allowed to use an authenticator
  "performedBy": "user_123" // user identifier to track changes to the configuration
}
```

### Response

If successful, the `/auth-configs` endpoint will return an HTTP 204 (No Content) [status code](#status-codes).
If an unknown purpose is passed through, the `/auth-configs` endpoint will return an HTTP 404 (Not Found) [status code](#status-codes).

## `/auth-configs/delete`

### Request

`POST` requests made to the `/auth-configs/delete` endpoint delete a specific authentication configuration, as specified by a `purpose`.

```http request
GET https://v4.passwordless.dev/auth-configs/add HTTP/1.1
ApiSecret: myapplication:secret:11f8dd7733744f2596f2a28544b5fbc4
Content-Type: application/json

{
  "purpose": "access-secrets-purpose", // existing purpose
  "performedBy": "user_123" // user identifier to track changes to the configuration
}
```

### Response

If successful, the `/auth-configs/delete` endpoint will return an HTTP 204 (No Content) [status code](#status-codes).
If an unknown purpose is passed through, the `/auth-configs/delete` endpoint will return an HTTP 404 (Not Found) [status code](#status-codes).

### Status codes

The API returns HTTP Status codes for each request.

In case you receive an error, you will also receive a JSON serialized summary of the error in the form of [problem details](errors/#problem-details). For more information, see the [Errors page](errors.md).

| HTTP Code | Message                                                                         | Status |
| --------- | ------------------------------------------------------------------------------- | ------ |
| 200       | Everything is OK.                                                               | ✅     |
| 201       | Everything is OK, resource created.                                             | ✅     |
| 204       | Everything is OK, response is empty.                                            | ✅     |
| 400       | Bad request. (see problem details for more info).                               | 🔴     |
| 401       | You did not identify yourself.                                                  | 🔴     |
| 403       | You are not allowed to perform the action. (see problem details for more info). | 🔴     |
| 409       | Conflict (see problem details for more info).                                   | 🔴     |
| 429       | Too many requests (see problem details for more info).                          | 🔴     |
| 500       | Something went very wrong on our side.                                          | 🔴     |

<!--
### Error Codes
`missing_register_token`

You will receive this error if you call `p.register(registerToken)` without a valid `registerToken` value.

**How to resolve**: Verify that there is an expected value in `registerToken` (*it should start with* `register_`). You obtain a register token from your backend by calling the `/register/token` endpoint.
-->

<!-- ### Register - Begin

Internal - This API is used by the Passwordless Client JS library

```http request
POST https://v4.passwordless.dev/register/begin HTTP/1.1
ApiKey: demo:public:6b08891222194fd1992465f8668f
Content-Type: application/json

{"token":"P-lP40PXvYzanr5BpaR14A:_UeZDzlAjl-TDLd1MK-OMO4AethFV2flVejX06Z_CyUCaijmRGjOoBVrRX4kkRCY","RPID":"localhost","Origin":"http://localhost:3000"}
```

Response:

```json
{
  "data": {
    "rp": { "id": "localhost", "name": null },
    "user": { "name": "test_user", "id": "dGVzdF91c2Vy", "displayName": null },
    "challenge": "9jouMw-UgSis_lWlKcpn5Q",
    "pubKeyCredParams": [
      { "type": "public-key", "alg": -7 },
      { "type": "public-key", "alg": -257 },
      { "type": "public-key", "alg": -37 },
      { "type": "public-key", "alg": -35 },
      { "type": "public-key", "alg": -258 },
      { "type": "public-key", "alg": -38 },
      { "type": "public-key", "alg": -36 },
      { "type": "public-key", "alg": -259 },
      { "type": "public-key", "alg": -39 },
      { "type": "public-key", "alg": -8 }
    ],
    "timeout": 60000,
    "attestation": "none",
    "authenticatorSelection": {
      "requireResidentKey": false,
      "userVerification": "preferred"
    },
    "excludeCredentials": [],
    "extensions": {
      "exts": true,
      "uvi": true,
      "loc": true,
      "uvm": true,
      "biometricPerfBounds": { "FAR": 3.4028235e38, "FRR": 3.4028235e38 }
    },
    "status": "ok",
    "errorMessage": ""
  },
  "sessionId": "ZbiFQ1QLgVBVa5N2whoHyg:ByTuwQF1rnkYincVeA4P_7pg00NgUxw89gg-C1kPJob_E2-uI6akvd6qfZ4fS1f8pj5n274D7b0RNTj13Ln69YJNy50ZneTSSOY354Ps_gxBLQnS9XNscK3u-lnYDeZ56VFEMnnZBrEmc_TMtLgJHdh6nZpUsTT0HH69NXbl0em4KNCSJVrk92ouZxTJq8YGI5VbfwXu6zfzyBObjxcdhRKd4UBSEWCZT0OV880KWvBtxFaay7E05H4kif20Au_4mHEvzAJs5oo9jPCIHwyrn-a0g9FyR-EapOCu8jmvxd6AHKMV8eOyGtNceYTSxEuyvaG8BhAPPvdC5GidAIGaeVTsf4ol2y-IzrngLnBsEY8JO7ysSCDzHrqQ0p8pdvxhuUKPBpG5AxTm1FULaY9PNKVH2HNhXQ7KDY8OFgCvB1zcB8PqCgi8MPeFKn-jkwkEsvXYJM8Q4SKagBqSn_H6CfHkhd3VkJYGJBqL9wMYLfju5rAaXFOcR6-NjfaPliNdjv57-xg8ffMvTvpNf-mpKwe8kT9HxbGhbkU48A_h7ermMidDHST1XCmlM8AhT8UiDFaGoyy2-LVzXnllQT9uiAiFdehMc26Y5_7jJczZcfSkuw_DP8H_P-0riW6EhHH8VGY7Rb4JHyrXhXE2KFQPv7Gcgf3DsD_WhzIZRZOY-M5tNWSbIwk-uA99D9Bb8zCKkdGLaEwwI93QsLZ7Wl2nRKQnKijhb6vg21PmqXHgIcJfvFWFMBrndPLVU7z67Q2CzLgwUKaTnkvBU7LMCICs9_5BV1SCVTMZlYarvpwA6TriW9Hg2SDiucIGgCAjMqW8Pre_rVpbRqOvqosur3LyHcHjoLsytwMqB8s3PUGoehKmiFlBds3g01CGW5K0-Uck"
}
```

### Register - Complete

Internal - This API is used by the Passwordless Client JS library

```http request
POST https://v4.passwordless.dev/register/complete HTTP/1.1
ApiKey: demo:public:6b08891222194fd1992465f8668f
Content-Type: application/json

{
   "response":{
      "id":"M_HGNhr1ELH45hlEpVEE-Uek2YQOC_9_fmAS1yWsfH8",
      "rawId":"M_HGNhr1ELH45hlEpVEE-Uek2YQOC_9_fmAS1yWsfH8",
      "type":"public-key",
      "extensions":{

      },
      "response":{
         "AttestationObject":"o2NmbXRkbm9uZWdhdHRTdG10oGhhdXRoRGF0YVkBZ0mWDeWIDoxodDQXD2R2YFuP5K65ooYyx5lc87qDHZdjRQAAAAAAAAAAAAAAAAAAAAAAAAAAACAz8cY2GvUQsfjmGUSlUQT5R6TZhA4L_39-YBLXJax8f6QBAwM5AQAgWQEAxg1pNtQU3wuOg5X9Rbz5ofVlBD0hD2qQojpxx2_fPi89bd21DHyTNA2TDLLtu4czINYf7cbBU07I8_WY-sbDtQwHV38MvzI5dwaoa18F1InzOm5j2q7eYe-irBDB8-92G5FME6_rj11dYyjbx6nK2Tt9M2EkBKXNxyMGrowkW2CLMDVxeOaH8IyqJYWILM1R6eNrOk2TBczTO83zNE6rQN7pkZHPF1zsC5YRnpA32obkZQU-i4-Lubp5kV_64yy5kIIugog3O8CVSn43NNxukYG5r6VqD4C0By0rPqEJBm0F3WepP0I4M1rg7cVKCUK-GMwYR11drhzwnuxWY2MuDSFDAQAB",
         "clientDataJson":"eyJ0eXBlIjoid2ViYXV0aG4uY3JlYXRlIiwiY2hhbGxlbmdlIjoiOWpvdU13LVVnU2lzX2xXbEtjcG41USIsIm9yaWdpbiI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsImNyb3NzT3JpZ2luIjpmYWxzZX0"
      }
   },
   "sessionId":"ZbiFQ1QLgVBVa5N2whoHyg:ByTuwQF1rnkYincVeA4P_7pg00NgUxw89gg-C1kPJob_E2-uI6akvd6qfZ4fS1f8pj5n274D7b0RNTj13Ln69YJNy50ZneTSSOY354Ps_gxBLQnS9XNscK3u-lnYDeZ56VFEMnnZBrEmc_TMtLgJHdh6nZpUsTT0HH69NXbl0em4KNCSJVrk92ouZxTJq8YGI5VbfwXu6zfzyBObjxcdhRKd4UBSEWCZT0OV880KWvBtxFaay7E05H4kif20Au_4mHEvzAJs5oo9jPCIHwyrn-a0g9FyR-EapOCu8jmvxd6AHKMV8eOyGtNceYTSxEuyvaG8BhAPPvdC5GidAIGaeVTsf4ol2y-IzrngLnBsEY8JO7ysSCDzHrqQ0p8pdvxhuUKPBpG5AxTm1FULaY9PNKVH2HNhXQ7KDY8OFgCvB1zcB8PqCgi8MPeFKn-jkwkEsvXYJM8Q4SKagBqSn_H6CfHkhd3VkJYGJBqL9wMYLfju5rAaXFOcR6-NjfaPliNdjv57-xg8ffMvTvpNf-mpKwe8kT9HxbGhbkU48A_h7ermMidDHST1XCmlM8AhT8UiDFaGoyy2-LVzXnllQT9uiAiFdehMc26Y5_7jJczZcfSkuw_DP8H_P-0riW6EhHH8VGY7Rb4JHyrXhXE2KFQPv7Gcgf3DsD_WhzIZRZOY-M5tNWSbIwk-uA99D9Bb8zCKkdGLaEwwI93QsLZ7Wl2nRKQnKijhb6vg21PmqXHgIcJfvFWFMBrndPLVU7z67Q2CzLgwUKaTnkvBU7LMCICs9_5BV1SCVTMZlYarvpwA6TriW9Hg2SDiucIGgCAjMqW8Pre_rVpbRqOvqosur3LyHcHjoLsytwMqB8s3PUGoehKmiFlBds3g01CGW5K0-Uck",
   "RPID":"localhost",
   "Origin":"http://localhost:3000"
}
```

### Sign in - Begin

Internal - This API is used by the Passwordless Client JS library

```http request
POST https://v4.passwordless.dev/signin/begin HTTP/1.1
ApiKey: demo:public:6b08891222194fd1992465f8668f
Content-Type: application/json

{"username":"test_user","RPID":"localhost","Origin":"http://localhost:3000"}
```

Response:

```json
{
  "data": {
    "challenge": "Xt8jaU-dj2nCCMznu6G8Hw",
    "timeout": 60000,
    "rpId": "localhost",
    "allowCredentials": [
      {
        "type": "public-key",
        "id": "M_HGNhr1ELH45hlEpVEE-Uek2YQOC_9_fmAS1yWsfH8"
      }
    ],
    "userVerification": "discouraged",
    "extensions": {
      "txAuthSimple": "FIDO",
      "txAuthGenericArg": {
        "contentType": "text/plain",
        "content": "RklETw=="
      },
      "uvi": true,
      "loc": true,
      "uvm": true
    },
    "status": "ok",
    "errorMessage": ""
  },
  "sessionId": "zqlqr8EsuR9QVcDWwTZhHA:_1QW8x_v5E7HnnnBe_2Rd4oBmrG-Ogc-jA6l4P3AZfqxiKq22Dj3fGm7Y_4SrR4eD00PTllNT9DPYsQCanSNpZNx_hfhDGltfxC7VBoSU73yWy55wDj2929St1Jtea3PJN0ZOczlY84Ws_q1ewRd0-zj4fXArpJ6jOiQu-i48yAbdyc18wXJxDxkVXv6w5cAMhHMKQs4c0oaJwR9-0Cr0knCQ9aZan-7gsnMzt05wGmfZ1L5VPcvHMSAxAeAYB8IGgctThluXxMsR0kZpVsPTrV2pOwGp-01VVDU60qOngRs5F4RkrMClUxj2ok3y3lStgMEngUMdRg"
}
```

### Sign in - Complete

Internal - This API is used by the Passwordless Client JS library

```http request
POST https://v4.passwordless.dev/signin/complete HTTP/1.1
ApiKey: demo:public:6b08891222194fd1992465f8668f
Content-Type: application/json

{
   "response":{
      "id":"M_HGNhr1ELH45hlEpVEE-Uek2YQOC_9_fmAS1yWsfH8",
      "rawId":"M_HGNhr1ELH45hlEpVEE-Uek2YQOC_9_fmAS1yWsfH8",
      "type":"public-key",
      "extensions":{

      },
      "response":{
         "authenticatorData":"SZYN5YgOjGh0NBcPZHZgW4_krrmihjLHmVzzuoMdl2MFAAAAAQ",
         "clientDataJson":"eyJ0eXBlIjoid2ViYXV0aG4uZ2V0IiwiY2hhbGxlbmdlIjoiWHQ4amFVLWRqMm5FSU16bnU2RzhIdyIsIm9yaWdpbiI6Imh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsImNyb3NzT3JpZ2luIjpmYWxzZX0",
         "signature":"FWqjYDCZvVYMWctEFmeekaCnRs7kiWJLRMrVcOM02UHO3vT1wkAqn6iusaGQGDXQkwJvGWMgkDeF8BMQHfyRmB_MK4mMxrgAHnBxUbiMsL7Ld01chQZia2_4G8wkU3a0OvaFPduXRE1ahzpmctAJF70jmpv6O3rvlif-CL1kVkeXRLeqA2nwYX2ogfbQMtzYNmcETM4QG5S8JZkczitESOX4R1UVScqC4051zMgfZAElaVVjrb8574bYggPp-vlA18-DUvumTaQKfiQquZVaYCieAw2Trwkt_bxaHCZ1rU8Po2KbiViy2F9TDBJIAV6iDPo951IJ3L5I21k_i2WcbA"
      }
   },
   "sessionId":"zqlqr8EsuR9QVcDWwTZhHA:_1QW8x_v5E7HnnnBe_2Rd4oBmrG-Ogc-jA6l4P3AZfqxiKq22Dj3fGm7Y_4SrR4eD00PTllNT9DPYsQCanSNpZNx_hfhDGltfxC7VBoSU73yWy55wDj2929St1Jtea3PJN0ZOczlY84Ws_q1ewRd0-zj4fXArpJ6jOiQu-i48yAbdyc18wXJxDxkVXv6w5ch0vv9GjPD_HXSf5mTsO2pQKstZuXzPSsvTF72cVPsCJ8ZAfOFpxf28e-qLDyuklfVt4G87uY847AQkNySRdCuaA3KABvzgLTzDwC7tmnfHc90bMYnNsTA2a3XBbil8gtaEneRCURYFH7N-b12qEBihd3-nHkRd6Dkz2H3i_o1VDMtkmpC55jv6Y87xKJk9eexKGbXLnbi4su8RNPeuCrF5AurNsSy5XBaHcrbUfcDhyxxBHEPXGV6uilm4OHCCxqYvvOuH4P2DLAMhHMKQs4c0oaJwR9-0Cr0knCQ9aZan-7gsnMzt05wGmfZ1L5VPcvHMSAxAeAYB8IGgctThluXxMsR0kZpVsPTrV2pOwGp-01VVDU60qOngRs5F4RkrMClUxj2ok3y3lStgMEngUMdRg",
   "RPID":"localhost",
   "Origin":"http://localhost:3000"
}
```

Response:

```json
{
  "data": "zDM3wmUMaXjKole4EUKYbw:kSmJNcfcGiAxsHmEb2VPwBPc9hsMlvGg5HJS4zIjmnKbMvRj4oEIy_Ld9vZHoGW7KoGZAL9zDVGuDAQYcO4eiCIvjcGb2Oq-40svSgWWOVClG9UfXw7UaSlwMkBlG5Op"
}
``` -->
